(this.webpackJsonp3dchart=this.webpackJsonp3dchart||[]).push([[0],{12:function(e,t,i){e.exports=i(20)},17:function(e,t,i){},18:function(e,t,i){},19:function(e,t,i){},20:function(e,t,i){"use strict";i.r(t);var n=i(6),o=i.n(n),s=i(10),a=i.n(s),r=(i(17),i(18),i(0)),l=i(3),h=i(1),c=i(2),d=i(4),u=i(11),w=i.n(u),g=(i(19),function(e){Object(h.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).state={oWorld:null,oFrame:null,oConfig:null,oData:null,oSlice:null,bg_color:11206570,i_lx:0,i_ly:0,i_lz:0},n}return Object(l.a)(i,[{key:"init",value:function(){var e=new d.Scene;e.background=new d.Color(this.state.bg_color);var t=new d.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1e3);t.up.set(0,0,1),t.position.set(150,150,150);var i=new d.WebGLRenderer;i.setSize(window.innerWidth,window.innerHeight),this.container.appendChild(i.domElement);var n=new w.a(t,i.domElement);n.enableDamping=!0,n.dampingFactor=.05,n.screenSpacePanning=!1,n.minDistance=10,n.maxDistance=100,n.maxPolarAngle=Math.PI;var o=new d.AxesHelper(7749);e.add(o),window.addEventListener("resize",(function(){t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)}),!1);!function o(){requestAnimationFrame(o),n.update(),i.render(e,t)}();var s={scene:e,camera:t,controls:n,renderer:i};return this.setState({oWorld:s}),s}},{key:"makeFrame",value:function(){var e=this.state.oWorld,t={x:this.state.oConfig.size.x-("x"===this.state.oSlice.axis?this.state.oSlice.level:0),y:this.state.oConfig.size.y-("y"===this.state.oSlice.axis?this.state.oSlice.level:0),z:this.state.oConfig.size.z-("z"===this.state.oSlice.axis?this.state.oSlice.level:0),get X(){return this.x*this.tileSize},get Y(){return this.y*this.tileSize},get Z(){return this.z*this.tileSize},tileSize:1,mid:function(e){return t[e.toUpperCase()]/2}};console.log(t),e.controls.target.set(t.mid("x"),t.mid("y"),t.mid("z"));for(var i=new d.Object3D,n=0;n<6;n++)i.add(o(t,n));return e.scene.add(i),i.size=t,i;function o(e,t){var i=Math.PI,n={0:{width:"x",height:"z",angle:new d.Vector3(3*i/2,0,0),get position(){return new d.Vector3(e[this.width]*e.tileSize/2,0,e[this.height]*e.tileSize/2)},side:d.BackSide},1:{width:"x",height:"z",angle:new d.Vector3(3*i/2,0,0),get position(){return new d.Vector3(e[this.width]*e.tileSize/2,e.y*e.tileSize,e[this.height]*e.tileSize/2)},side:d.FrontSide},2:{width:"y",height:"z",angle:new d.Vector3(3*i/2,3*i/2,0),get position(){return new d.Vector3(0,e[this.width]*e.tileSize/2,e[this.height]*e.tileSize/2)},side:d.FrontSide},3:{width:"y",height:"z",angle:new d.Vector3(3*i/2,3*i/2,0),get position(){return new d.Vector3(e.x*e.tileSize,e[this.width]*e.tileSize/2,e[this.height]*e.tileSize/2)},side:d.BackSide},4:{width:"x",height:"y",angle:new d.Vector3(i,0,0),get position(){return new d.Vector3(e[this.width]*e.tileSize/2,e[this.height]*e.tileSize/2,0)},side:d.FrontSide},5:{width:"x",height:"y",angle:new d.Vector3(i,0,0),get position(){return new d.Vector3(e[this.width]*e.tileSize/2,e[this.height]*e.tileSize/2,e.z*e.tileSize)},side:d.BackSide}}[t],o=new d.PlaneGeometry(e[n.width]*e.tileSize,e[n.height]*e.tileSize,e[n.width],e[n.height]),s=new d.MeshBasicMaterial({vertexColors:d.FaceColors,side:n.side}),a=new d.Mesh(o,s);return a.rotation.setFromVector3(n.angle),a.position.copy(n.position),o.dispose(),s.dispose(),a}}},{key:"updateChart",value:function(){var e=null,t=null,i=this.state.oData,n=this.state.oFrame,o=this.state.i_lx,s=this.state.i_ly,a=this.state.i_lz;if(!(!n||!i||o>i[0][0].length||s>i[0].length||a>i.length)){for(var r,l,h,c,d=new Array(6).fill(0).map((function(e){return new Array})),u=function(e,t){return{r:e%t,d:Math.trunc(e/t)}},w=i.flat(3),g=Math.min.apply(null,w),m=Math.max.apply(null,w),f=0;f<o*s*a;f++){r=u(f,o),l=u(r.d,s),h=u(l.d,a),c=1*(0===l.r)+""+1*(l.r===s-1)+1*(0===r.r)+1*(r.r===o-1)+1*(0===h.r)+1*(h.r===a-1);for(var S=0;S<c.length;S++)"1"===c[S]&&d[S].push(i[h.r][l.r][r.r])}for(var z=0;z<6;z++){for(var v=(e=n.children[z].geometry.faces).length/2,p=0;p<v;p++)t=x(g,m,d[z][p]),e[2*p].color.set(t),e[2*p+1].color.set(t);n.children[z].geometry.elementsNeedUpdate=!0}}function x(e,t,i){var n=240-240*(i-e)/(t-e);return"hsl("+(n=Math.floor(n))+",100%,50%)"}}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(){var e=this;if(this.state.oWorld.scene.background.setHex(this.state.bg_color),this.state.i_lx!==this.state.oConfig.size.x-("x"===this.state.oSlice.axis?this.state.oSlice.level:0)||this.state.i_ly!==this.state.oConfig.size.y-("y"===this.state.oSlice.axis?this.state.oSlice.level:0)||this.state.i_lz!==this.state.oConfig.size.z-("z"===this.state.oSlice.axis?this.state.oSlice.level:0)){this.state.oFrame&&this.state.oFrame.children.forEach((function(t){console.log(t),t.geometry.dispose(),t.material.dispose(),e.state.oWorld.scene.remove(t)})),this.state.oWorld.scene.remove(this.state.oFrame);var t=this.makeFrame(this.state);this.setState({oFrame:t,i_lx:this.state.oConfig.size.x-("x"===this.state.oSlice.axis?this.state.oSlice.level:0),i_ly:this.state.oConfig.size.y-("y"===this.state.oSlice.axis?this.state.oSlice.level:0),i_lz:this.state.oConfig.size.z-("z"===this.state.oSlice.axis?this.state.oSlice.level:0)})}this.updateChart()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null," ",o.a.createElement("div",{className:"chartContainer",ref:function(t){e.container=t}})," ")}}]),i}(n.Component)),m={size:{x:50,y:24,z:23,tilesize:1},door:{show:!0,direction:"A"},"axis-labels":{"axis-x":{show:!0,list:[0,10,12,19]},"axis-y":{show:!0,list:[2,3]},"axis-z":{show:!0,list:[1,2]}}},f=[[[0,1,2],[3,4,5],[6,7,8]],[[9,10,11],[12,13,14],[15,16,17]],[[18,19,20],[21,22,23],[24,25,26]]],S={axis:"x",level:1};function z(){return o.a.createElement("div",null,o.a.createElement(g,{ref:function(e){return(t=e).setState({oConfig:m,oData:f,oSlice:S,bg_color:13421823}),setInterval((function(){var e=new Array(50).fill(0).map((function(e){return new Array(50).fill(0).map((function(e){return new Array(50).fill(0).map((function(e){return Math.trunc(1024*Math.random())}))}))}));t.setState({oData:e})}),1e3),void window.addEventListener("keypress",(function(e){"z"===e.key&&t.setState({oSlice:{axis:S.axis,level:prompt("")}})}));var t}}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.6a4c735c.chunk.js.map